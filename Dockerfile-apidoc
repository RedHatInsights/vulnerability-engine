FROM swaggerapi/swagger-ui:v3.22.1

RUN chmod g+w,o+w /etc/nginx/ /etc/nginx/nginx.conf \
                  /usr/share/nginx/html/ /usr/share/nginx/html/index.html \
                  /var/log/nginx/ /var/cache/nginx/ /var/run/ 

ADD apidoc/nginx.conf.template /etc/nginx/
# add entrypoint wrapper setting up nginx proxy
ADD apidoc/entrypoint.sh /usr/share/nginx/

RUN adduser -D insights
USER insights

CMD /usr/share/nginx/entrypoint.sh /usr/share/nginx/run.sh

