# pylint: skip-file
# flake8: noqa

from gunicorn.glogging import Logger
from prometheus_client import multiprocess

from common.logging import setup_cw_logging


class CustomLogger(Logger):
    """Custom logger for Gunicorn log messages."""

    def setup(self, cfg):
        """Configure Gunicorn application logging configuration."""
        super().setup(cfg)
        setup_cw_logging(self.access_log)


def child_exit(server, worker):
    multiprocess.mark_process_dead(worker.pid)


accesslog='-'
access_log_format="%(t)s %(s)s %(m)s %(U)s (%(q)s) %(L)ss"
logger_class="manager.gunicorn_conf.CustomLogger"
