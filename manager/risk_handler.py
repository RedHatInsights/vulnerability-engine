"""
Module for /business_risk API endpoint
"""
from .base import GetRequest
from common.peewee_model import BusinessRisk


class GetRisk(GetRequest):
    """GET to /v1/business_risk"""

    _endpoint_name = r"/v1/business_risk"

    @classmethod
    def handle_get(cls, **kwargs):  # pylint: disable=unused-argument
        """Return the data from the business_risk table as JSON"""
        query = (BusinessRisk.select().order_by(BusinessRisk.id.asc()).dicts())
        risk_list = []
        for risk in query:
            risk_list.append(risk)
        return {"data": risk_list, "meta": {"total_items": len(risk_list)}}, 200
