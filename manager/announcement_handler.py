"""
Module for /announcement API endpoint
"""
import peewee
from common.peewee_model import Announcement
from .base import GetRequest, ApplicationException


class GetAnnouncement(GetRequest):
    """GET to /v1/announcement"""

    _endpoint_name = r"/v1/announcement"

    @classmethod
    def handle_get(cls, **kwargs):
        try:
            result = (Announcement.get())
        except peewee.DoesNotExist as peewee_does_not_exist:
            raise ApplicationException("Announcement not set.", 404) from peewee_does_not_exist

        return {'message': result.message,
                'last_updated': result.last_updated}, 200
