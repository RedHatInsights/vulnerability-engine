"""
Test suite for backoffice proxy.
"""

from common import backoffice_proxy


class TestBoProxy:
    """Test suite"""

    subject = "Stats mail"
    body = "1337"
    recipients = ["mail@redhat.com"]
    cc_mails = ["cc@redhat.com"]
    bcc_mails = ["bcc@redhat.com"]

    @staticmethod
    def _ext_serv_mock(_, *__, **kwargs):
        data_json = kwargs["data_json"]
        assert data_json == {"emails": [{"subject": TestBoProxy.subject,
                                         "body": TestBoProxy.body,
                                         "recipients": TestBoProxy.recipients,
                                         "ccList": TestBoProxy.cc_mails,
                                         "bccList": TestBoProxy.bcc_mails,
                                         "bodyType": "html"}]}

    def test_send_mail(self):
        """Test send mail function"""
        backoffice_proxy.external_service_request = TestBoProxy._ext_serv_mock
        backoffice_proxy.send_mail(self.subject, self.body, self.recipients, self.cc_mails, self.bcc_mails)
