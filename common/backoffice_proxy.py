"""
Backoffice proxy utils.
"""
import tempfile

from common.config import Config
from common.logging import get_logger

LOGGER = get_logger(__name__)

CFG = Config()


def format_headers():
    """
    Formats headers for bo-proxy request
    """
    return {
        'x-rh-apitoken': CFG.x_rh_apitoken,
        'x-rh-clientid': CFG.x_rh_clientid,
        'x-rh-insights-env': CFG.x_rh_insights_env
    }


def create_cert():
    """
    Creates bo-proxy certificate and returns a handle to it
    """
    with tempfile.NamedTemporaryFile(delete=False) as cert:
        cert.write(CFG.bop_ca_cert)
    return cert
