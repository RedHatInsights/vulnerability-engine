"""
Postgresql settings for peewee mappings.
"""
from playhouse.postgres_ext import PostgresqlExtDatabase

from common.config import Config

CFG = Config()

DB = PostgresqlExtDatabase(
    CFG.db_name,
    user=CFG.db_user,
    password=CFG.db_pass,
    host=CFG.db_host,
    port=CFG.db_port,
    sslmode=CFG.db_ssl_mode,
    sslrootcert=CFG.db_ssl_root_cert_path,
)

if CFG.db_read_replica_enabled and CFG.db_host_read_replica and CFG.db_port_read_replica:
    DB_READ_REPLICA = PostgresqlExtDatabase(
        CFG.db_name,
        user=CFG.db_user,
        password=CFG.db_pass,
        host=CFG.db_host_read_replica,
        port=CFG.db_port_read_replica,
        sslmode=CFG.db_ssl_mode,
        sslrootcert=CFG.db_ssl_root_cert_path,
    )
else:
    DB_READ_REPLICA = None
