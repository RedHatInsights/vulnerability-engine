# vulnerability-engine scripts

Support scripts for vulnerability-engine project

## 3scale-mock

This is a command line tool for locally testing API calls. To use it, simply prefix the curl command you would use to hit the local system with the 3scale-mock script. For example:

```./3scale-mock curl -k -X GET https://localhost:8300/api/v1/cves/CVE-2014-0160/affectedsystems/ | python -m json.tool```

If ~/.3scale-mock exists, it will use it's contents for the identity it uses for the various commands. If it does not exist, it uses the identity defined in the 3scale-mock script itself.

A few values in the identity can be overridden on the command line for easier testing.  3scale-mock help displays args that modify values in the identity.

```./3scale-mock --help```

3scale-mock supports 3 commands: 'curl', 'save' and 'print'

```./3scale-mock [command] --help```

### save

Save the identity, modified by any 3scale-mock arguments that do so, to the optionally specified file, or the default ~/.3scale-mock

The following command will load the default identity from ~/.3scale-mock, if it exists, or use the identity defined in the 3scale-mock script.  Then it will set the account number to '00000013' and the username to 'shadowman'.  Finally it will save the identity to ~/.3scale-mock.

```./3scale-mock -a 00000013 -u shadowman save```

### print

Print the base64 encoded identity after its been modified by any 3scale-mock arguments that do so.

### curl

This executes a curl command, with the base64 encoded identity set in a header named 'x-rh-identity', followed by all arguments on the 3scale-mock command line that 3scale-mock does not itself recognize.

Keep in mind, any args that 3scale-mock accepts cannot be passed to the curl command, but any other args not defined by 3scale-mock will get passed to the curl command.

If you use the -d argument so that 3scale-mock prints out extra debug information, the output of the curl command will fail if piped to `python -m json.tool`
