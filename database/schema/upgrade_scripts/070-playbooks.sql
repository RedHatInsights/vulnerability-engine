CREATE TABLE IF NOT EXISTS playbook (
  id SERIAL,
  rule_id INT,
  play TEXT,
  version TEXT,
  description TEXT,
  PRIMARY KEY (id),
  CONSTRAINT rule_id
    FOREIGN KEY (rule_id)
    REFERENCES insights_rule (id)
) TABLESPACE pg_default;

GRANT INSERT, UPDATE, DELETE ON playbook TO ve_db_user_taskomatic;

GRANT SELECT ON playbook TO ve_db_user_evaluator;
GRANT SELECT ON playbook TO ve_db_user_listener;
GRANT SELECT ON playbook TO ve_db_user_manager;
GRANT SELECT ON playbook TO ve_db_user_vmaas_sync;
GRANT SELECT ON playbook TO ve_db_user_metrics;
GRANT SELECT ON playbook TO ve_db_user_taskomatic;
GRANT SELECT ON playbook TO ve_db_user_advisor_listener;

GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_advisor_listener;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_evaluator;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_listener;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_manager;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_metrics;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_taskomatic;
GRANT SELECT, USAGE ON SEQUENCE playbook_id_seq TO ve_db_user_vmaas_sync;
