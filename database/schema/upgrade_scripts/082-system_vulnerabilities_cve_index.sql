CREATE INDEX ON system_vulnerabilities_inactive(cve_id);

CREATE OR REPLACE FUNCTION create_cve_index(parts INTEGER)
    RETURNS VOID AS
$$
DECLARE
    I INTEGER;
BEGIN
    I := 0;
    WHILE I < parts
        LOOP
            EXECUTE 'CREATE INDEX ON system_vulnerabilities_active_' || text(I) || '(cve_id);';
            I = I + 1;
        END LOOP;
END;
$$ LANGUAGE plpgsql;

SELECT create_cve_index(256);
DROP FUNCTION create_cve_index;
