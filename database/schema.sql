-- Functions -------------------------------------------------------------------------------------
create or replace FUNCTION empty(t TEXT)
RETURNS BOOLEAN as $$
BEGIN
    return t ~ '^[[:space:]]*$';
END;
$$ language 'plpgsql';

-- Tables ----------------------------------------------------------------------------------------

-- listener_repos
CREATE TABLE IF NOT EXISTS listener_repos (
  id SERIAL,
  name TEXT NOT NULL, CHECK (NOT empty(name)),
  last_modified TIMESTAMP WITH TIME ZONE NOT NULL,
  UNIQUE (name),
  PRIMARY KEY (id)
) TABLESPACE pg_default;
